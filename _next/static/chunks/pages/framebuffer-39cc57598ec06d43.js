(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{1294:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/framebuffer",function(){return n(6449)}])},6449:function(e,t,n){"use strict";n.a(e,(async function(e,i){try{n.r(t);var o=n(3231),r=n.n(o),a=n(9837),c=n(3803),s=n(2828),l=n(7015),u=n(8144),h=n.n(u),f=n(3639),d=n(3548),g=n(5353),m=n(4209),b=e([d,m]);function v(e,t,n,i,o,r,a){try{var c=e[r](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(i,o)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){y(e,t,n[t])}))}return e}[d,m]=b.then?(await b)():b;var p=new(function(){function e(){w(this,e),this.width=0,this.height=0,this.imageData=void 0,this.demoModeVisible=!1,(0,s.ky)(this,{toggleDemoModeVisible:s.aD.bound})}var t=e.prototype;return t.setImage=function(e){this.width=e.width,this.height=e.height,this.imageData=new ImageData(new Uint8ClampedArray(e.data),e.width,e.height)},t.toggleDemoModeVisible=function(){this.demoModeVisible=!this.demoModeVisible},e}());t.default=(0,l.Pi)((function(){var e,t=(0,f.useRef)(null),n=(0,f.useCallback)((e=r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.q.device){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.q.device.framebuffer();case 5:t=e.sent,p.setImage(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),g.q.showErrorDialog(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){v(r,i,o,a,c,"next",e)}function c(e){v(r,i,o,a,c,"throw",e)}a(void 0)}))}),[]);(0,f.useEffect)((function(){return(0,s.EH)((function(){var e=t.current;e&&p.imageData&&(e.width=p.width,e.height=p.height,e.getContext("2d").putImageData(p.imageData,0,0))}))}),[]);var i=(0,s.Fl)((function(){return[{key:"start",disabled:!g.q.device,iconProps:{iconName:m.PJ.Camera,style:{height:20,fontSize:20,lineHeight:1.5}},text:"Capture",onClick:n},{key:"Save",disabled:!p.imageData,iconProps:{iconName:m.PJ.Save,style:{height:20,fontSize:20,lineHeight:1.5}},text:"Save",onClick:function(){var e=t.current;if(e){var n=e.toDataURL(),i=document.createElement("a");i.href=n,i.download="Screenshot of ".concat(g.q.backend.name,".png"),i.click()}}}]})),o=(0,s.Fl)((function(){return[{key:"DemoMode",iconProps:{iconName:m.PJ.Wand,style:{height:20,fontSize:20,lineHeight:1.5}},checked:p.demoModeVisible,text:"Demo Mode",onClick:p.toggleDemoModeVisible},{key:"info",iconProps:{iconName:m.PJ.Info,style:{height:20,fontSize:20,lineHeight:1.5}},iconOnly:!0,tooltipHostProps:{content:"Use ADB FrameBuffer command to capture a full-size, high-resolution screenshot.",calloutProps:{calloutMaxWidth:250}}}]}));return(0,a.jsxs)(c.K,k({},m.LE,{children:[(0,a.jsx)(h(),{children:(0,a.jsx)("title",{children:"Screen Capture - Android Web Toolbox"})}),(0,a.jsx)(d.X3,{items:i.get(),farItems:o.get()}),(0,a.jsxs)(c.K,{horizontal:!0,grow:!0,styles:{root:{height:0}},children:[(0,a.jsx)(d.wM,{width:p.width,height:p.height,children:(0,a.jsx)("canvas",{ref:t,style:{display:"block"}})}),(0,a.jsx)(d.bq,{style:{display:p.demoModeVisible?"block":"none"}})]})]}))})),i()}catch(v){i(v)}}))}},function(e){e.O(0,[774,888,179],(function(){return t=1294,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=framebuffer-39cc57598ec06d43.js.map